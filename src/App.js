import React, { Component } from 'react';
import axios from 'axios';
import './App.css';

const STACK_NAME = process.env.ReactAppStackname;
const SERVICE_ENDPOINT = process.env.ReactAppServiceEndpoint;

class App extends Component {

  state = {
    images: null
  }

  componentDidMount() {
    axios.get(`${SERVICE_ENDPOINT}images`)
    .then(({data}) => {
      console.log(data);
      if (data && data.images.length > 0) {
        this.setState({images: data.images});
      }
    });
  }

  render() {

    const {images} = this.state;
    const imagesHTML = images && images.map((image, index) => (<img alt="random" src={image.url} />));

    return (
      <div className="App">
        <header className="App-header">
          <span className="App-logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 125 125" ><g id="aJINfM.tif"><path fill="#fff" d="M283.84,397.67v-5.19A4.64,4.64,0,0,0,284,392c.1-1.15.19-2.29.3-3.43a57.42,57.42,0,0,1,1.65-9.2,62.67,62.67,0,0,1,57.58-46.77,61,61,0,0,1,10.46.38,60,60,0,0,1,9.48,1.88,61.72,61.72,0,0,1,33.11,22.74,60.57,60.57,0,0,1,12.38,34.34,5.62,5.62,0,0,0,.09.57v5.19c0,.24-.07.48-.09.73-.11,1.38-.18,2.78-.33,4.16a57.18,57.18,0,0,1-1.85,9.43,62.72,62.72,0,0,1-31,38.38,61.74,61.74,0,0,1-25.4,7.14,3.89,3.89,0,0,0-.47.09H343a1.67,1.67,0,0,0-.3-.08c-.92-.07-1.83-.13-2.74-.22a59.88,59.88,0,0,1-9.41-1.7,62.69,62.69,0,0,1-43.35-40.34,61.56,61.56,0,0,1-3.2-16.34C284,398.5,283.9,398.08,283.84,397.67Zm94.44-30.49h-1.47c-4.36,0-8.72,0-13.08,0a8.76,8.76,0,0,0-5.8,2.07c-.3.24-.59.49-.87.76-.77.74-1.53,1.47-2.27,2.23q-10.05,10.2-20.08,20.42c-1.68,1.71-3.31,3.47-5,5.21-.13.14-.24.29-.36.44l.2.29c.94,1.06,1.83,2.15,2.81,3.16q6.89,7.05,13.79,14.06,4.88,5,9.76,9.93a17.72,17.72,0,0,0,3.35,2.75,6.42,6.42,0,0,0,2.86,1c.91.07,1.83.12,2.75.13h12.91l.48,0v-1.09a30.91,30.91,0,0,1-4.48-2.81c-3.1-2.29-6-4.77-8.89-7.35-7-6.28-13.6-12.89-20.1-19.65l-.29-.34c.16-.18.31-.35.47-.51,3.58-3.61,7.13-7.25,10.74-10.82,4.35-4.29,8.81-8.46,13.5-12.37a62,62,0,0,1,7.16-5.35c.53-.32,1.08-.61,1.6-.93a.56.56,0,0,0,.26-.35A6.34,6.34,0,0,0,378.28,367.18Zm-53.45,46c0-.32.06-.6.08-.88s0-.85,0-1.27c.17-2.92.33-5.85.5-8.77.08-1.5.16-3,.25-4.49.15-2.68.32-5.36.48-8,.12-2.05.23-4.09.36-6.13q.3-4.65.61-9.3c.09-1.19.19-2.39.28-3.58s.17-2.4.27-3.59a2,2,0,0,0-.73-1.79,4.44,4.44,0,0,0-1.1-.72,8.47,8.47,0,0,0-1.71-.53,16.52,16.52,0,0,0-5.48-.1,6.56,6.56,0,0,0-2.92,1,2.35,2.35,0,0,0-1.13,2.28c.14,1.6.24,3.2.36,4.81q.25,3.53.5,7.07c.12,1.76.23,3.52.34,5.28q.26,3.82.5,7.66c.12,1.88.23,3.76.35,5.65q.3,4.72.59,9.45.18,2.83.34,5.65a2,2,0,0,0,.08.31Zm-3.64,6a5.52,5.52,0,1,0-.06,11,5.52,5.52,0,1,0,.06-11Z" transform="translate(-283.84 -332.49)"></path></g></svg></span>
          <p className="App-content">
            Stackname: {STACK_NAME}<br/>
            Service Endpoint: <br/>
            <a href={SERVICE_ENDPOINT}>{SERVICE_ENDPOINT}</a>
          </p>
        </header>
        <aside>{imagesHTML}</aside>
      </div>
    );
  }
}

export default App;
